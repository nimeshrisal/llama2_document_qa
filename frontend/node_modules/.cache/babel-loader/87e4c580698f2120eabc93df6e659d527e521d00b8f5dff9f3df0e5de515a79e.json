{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Home\\\\Desktop\\\\llama-qa\\\\frontend\\\\src\\\\components\\\\uploadPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Button, message } from 'antd';\nimport { UploadOutlined, DeleteOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UploadPage = () => {\n  _s();\n  const [fileUploaded, setFileUploaded] = useState(false);\n  const [fileName, setFileName] = useState(null);\n  const history = useHistory();\n\n  // Handle file upload\n  const handleFileUpload = async event => {\n    var _event$target$files;\n    const file = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (!file) {\n      message.error('Please select a file to upload');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      // Send the file to the backend for processing\n      await axios.post('http://localhost:8000/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setFileUploaded(true);\n      setFileName(file.name); // Store the file name to display to the user\n      message.success('File uploaded successfully!');\n      // Save the uploaded status (could also use localStorage or other state management)\n      localStorage.setItem('fileUploaded', 'true');\n      // Optionally, redirect to Q&A page\n      history.push('/qa');\n    } catch (error) {\n      console.error('File upload error:', error);\n      message.error('Failed to upload the file');\n    }\n  };\n\n  // Handle document removal\n  const handleRemoveFile = async () => {\n    try {\n      // Call the backend to remove the file and clear its index\n      await axios.post('http://localhost:8000/remove');\n      setFileUploaded(false);\n      setFileName(null);\n      localStorage.removeItem('fileUploaded'); // Remove the upload status from localStorage\n      message.success('File removed successfully');\n    } catch (error) {\n      console.error('Error removing file:', error);\n      message.error('Failed to remove the file');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '24px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Upload Document\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), fileUploaded ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Uploaded Document: \", fileName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 19\n        }, this),\n        danger: true,\n        onClick: handleRemoveFile,\n        children: \"Remove Document\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleFileUpload,\n        style: {\n          display: 'none'\n        },\n        id: \"file-upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        icon: /*#__PURE__*/_jsxDEV(UploadOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 19\n        }, this),\n        onClick: () => {\n          var _document$getElementB;\n          return (_document$getElementB = document.getElementById('file-upload')) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.click();\n        },\n        children: \"Upload Document\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(UploadPage, \"6GAnA6nqNcv3raciQqVRQUzYF+U=\", false, function () {\n  return [useHistory];\n});\n_c = UploadPage;\nexport default UploadPage;\nvar _c;\n$RefreshReg$(_c, \"UploadPage\");","map":{"version":3,"names":["React","useState","Button","message","UploadOutlined","DeleteOutlined","axios","useHistory","jsxDEV","_jsxDEV","UploadPage","_s","fileUploaded","setFileUploaded","fileName","setFileName","history","handleFileUpload","event","_event$target$files","file","target","files","error","formData","FormData","append","post","headers","name","success","localStorage","setItem","push","console","handleRemoveFile","removeItem","style","padding","children","_jsxFileName","lineNumber","columnNumber","icon","danger","onClick","type","onChange","display","id","_document$getElementB","document","getElementById","click","_c","$RefreshReg$"],"sources":["C:/Users/Home/Desktop/llama-qa/frontend/src/components/uploadPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Button, message } from 'antd';\r\nimport { UploadOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst UploadPage: React.FC = () => {\r\n  const [fileUploaded, setFileUploaded] = useState(false);\r\n  const [fileName, setFileName] = useState<string | null>(null);\r\n  const history = useHistory();\r\n\r\n  // Handle file upload\r\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) {\r\n      message.error('Please select a file to upload');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    try {\r\n      // Send the file to the backend for processing\r\n      await axios.post('http://localhost:8000/upload', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n\r\n      setFileUploaded(true);\r\n      setFileName(file.name);  // Store the file name to display to the user\r\n      message.success('File uploaded successfully!');\r\n      // Save the uploaded status (could also use localStorage or other state management)\r\n      localStorage.setItem('fileUploaded', 'true');\r\n      // Optionally, redirect to Q&A page\r\n      history.push('/qa');\r\n    } catch (error) {\r\n      console.error('File upload error:', error);\r\n      message.error('Failed to upload the file');\r\n    }\r\n  };\r\n\r\n  // Handle document removal\r\n  const handleRemoveFile = async () => {\r\n    try {\r\n      // Call the backend to remove the file and clear its index\r\n      await axios.post('http://localhost:8000/remove');\r\n      \r\n      setFileUploaded(false);\r\n      setFileName(null);\r\n      localStorage.removeItem('fileUploaded'); // Remove the upload status from localStorage\r\n      message.success('File removed successfully');\r\n    } catch (error) {\r\n      console.error('Error removing file:', error);\r\n      message.error('Failed to remove the file');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '24px' }}>\r\n      <h3>Upload Document</h3>\r\n\r\n      {fileUploaded ? (\r\n        <div>\r\n          <p>Uploaded Document: {fileName}</p>\r\n          <Button\r\n            icon={<DeleteOutlined />}\r\n            danger\r\n            onClick={handleRemoveFile}\r\n          >\r\n            Remove Document\r\n          </Button>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <input\r\n            type=\"file\"\r\n            onChange={handleFileUpload}\r\n            style={{ display: 'none' }}\r\n            id=\"file-upload\"\r\n          />\r\n          <Button\r\n            icon={<UploadOutlined />}\r\n            onClick={() => document.getElementById('file-upload')?.click()}\r\n          >\r\n            Upload Document\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}