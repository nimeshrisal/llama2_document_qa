{"ast":null,"code":"import React,{useState}from'react';import{Upload,Button,Typography,Spin,Descriptions,message}from'antd';import{UploadOutlined}from'@ant-design/icons';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title,Text}=Typography;const UploadPage=()=>{const[fileList,setFileList]=useState([]);const[uploading,setUploading]=useState(false);const[uploadedFile,setUploadedFile]=useState(null);const handleChange=info=>{setFileList(info.fileList.map(file=>({...file,formattedSize:formatFileSize(file.size||0)})));};const handleUpload=async()=>{if(fileList.length===0){message.warning('Please select a file first!');return;}const file=fileList[0];const formData=new FormData();formData.append('file',file.originFileObj);setUploading(true);try{// Actual API call to FastAPI backend\nconst response=await axios.post('http://localhost:8000/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});if(response.data.status==='success'){message.success('File uploaded successfully!');setUploadedFile({uid:file.uid,name:file.name||'Unknown',size:file.size||0,type:file.type||'Unknown',url:response.data.file_path,formattedSize:formatFileSize(file.size||0)});}}catch(error){message.error('Upload failed. Please try again.');console.error('Upload error:',error);}finally{setUploading(false);}};const getFileExtension=filename=>{return filename.split('.').pop();};const formatFileSize=bytes=>{if(bytes===0)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB','TB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(2))+' '+sizes[i];};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px',height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(Title,{level:3,children:\"\\uD83D\\uDCC1 Upload Document\"}),/*#__PURE__*/_jsx(Upload,{beforeUpload:()=>false// prevent automatic upload\n,onChange:handleChange,fileList:fileList,maxCount:1,accept:\".pdf,.doc,.docx,.txt\",disabled:uploading,itemRender:(originNode,file)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',width:'100%'},children:[/*#__PURE__*/_jsx(\"span\",{children:file.name}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:file.formattedSize||formatFileSize(file.size||0)})]}),children:/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(UploadOutlined,{}),children:\"Select File\"})}),fileList.length>0&&!uploadedFile&&/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleUpload,disabled:uploading,loading:uploading,style:{marginTop:16},children:uploading?'Uploading...':'Start Upload'}),uploading&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:24,textAlign:'center'},children:/*#__PURE__*/_jsx(Spin,{tip:\"Uploading your file...\",size:\"large\",children:/*#__PURE__*/_jsx(\"div\",{style:{padding:'50px',background:'rgba(0, 0, 0, 0.05)',borderRadius:'4px'}})})}),!uploading&&uploadedFile&&/*#__PURE__*/_jsxs(Descriptions,{title:\"Uploaded File Details\",bordered:true,column:1,size:\"small\",style:{marginTop:24},children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:\"File Name\",children:uploadedFile.name}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Extension\",children:getFileExtension(uploadedFile.name)}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Type\",children:uploadedFile.type}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Size\",children:uploadedFile.formattedSize}),uploadedFile.url&&/*#__PURE__*/_jsx(Descriptions.Item,{label:\"URL\",children:/*#__PURE__*/_jsx(\"a\",{href:uploadedFile.url,target:\"_blank\",rel:\"noopener noreferrer\",children:\"View File\"})})]})]});};export default UploadPage;","map":{"version":3,"names":["React","useState","Upload","Button","Typography","Spin","Descriptions","message","UploadOutlined","axios","jsx","_jsx","jsxs","_jsxs","Title","Text","UploadPage","fileList","setFileList","uploading","setUploading","uploadedFile","setUploadedFile","handleChange","info","map","file","formattedSize","formatFileSize","size","handleUpload","length","warning","formData","FormData","append","originFileObj","response","post","headers","data","status","success","uid","name","type","url","file_path","error","console","getFileExtension","filename","split","pop","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","style","padding","height","display","flexDirection","children","level","beforeUpload","onChange","maxCount","accept","disabled","itemRender","originNode","justifyContent","width","icon","onClick","loading","marginTop","textAlign","tip","background","borderRadius","title","bordered","column","Item","label","href","target","rel"],"sources":["C:/Users/Home/Desktop/llama-qa/frontend/src/components/uploadPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Upload, Button, Typography, Spin, Descriptions, message } from 'antd';\r\nimport { UploadOutlined } from '@ant-design/icons';\r\nimport type { UploadFile } from 'antd/es/upload/interface';\r\nimport axios from 'axios';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst UploadPage: React.FC = () => {\r\n  const [fileList, setFileList] = useState<UploadFile[]>([]);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [uploadedFile, setUploadedFile] = useState<{\r\n    uid: string;\r\n    name: string;\r\n    size: number;\r\n    type: string;\r\n    url?: string;\r\n    formattedSize?: string;\r\n  } | null>(null);\r\n\r\n  const handleChange = (info: { file: UploadFile; fileList: UploadFile[] }) => {\r\n    setFileList(info.fileList.map(file => ({\r\n      ...file,\r\n      formattedSize: formatFileSize(file.size || 0)\r\n    })));\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (fileList.length === 0) {\r\n      message.warning('Please select a file first!');\r\n      return;\r\n    }\r\n\r\n    const file = fileList[0];\r\n    const formData = new FormData();\r\n    formData.append('file', file.originFileObj as File);\r\n\r\n    setUploading(true);\r\n\r\n    try {\r\n      // Actual API call to FastAPI backend\r\n      const response = await axios.post('http://localhost:8000/upload', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n\r\n      if (response.data.status === 'success') {\r\n        message.success('File uploaded successfully!');\r\n        setUploadedFile({\r\n          uid: file.uid,\r\n          name: file.name || 'Unknown',\r\n          size: file.size || 0,\r\n          type: file.type || 'Unknown',\r\n          url: response.data.file_path,\r\n          formattedSize: formatFileSize(file.size || 0)\r\n        });\r\n      }\r\n    } catch (error) {\r\n      message.error('Upload failed. Please try again.');\r\n      console.error('Upload error:', error);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const getFileExtension = (filename: string) => {\r\n    return filename.split('.').pop();\r\n  };\r\n\r\n  const formatFileSize = (bytes: number): string => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '24px', height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n      <Title level={3}>üìÅ Upload Document</Title>\r\n\r\n      <Upload\r\n        beforeUpload={() => false} // prevent automatic upload\r\n        onChange={handleChange}\r\n        fileList={fileList}\r\n        maxCount={1}\r\n        accept=\".pdf,.doc,.docx,.txt\"\r\n        disabled={uploading}\r\n        itemRender={(originNode, file) => (\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', width: '100%' }}>\r\n            <span>{file.name}</span>\r\n            <Text type=\"secondary\">\r\n              {(file as any).formattedSize || formatFileSize(file.size || 0)}\r\n            </Text>\r\n          </div>\r\n        )}\r\n      >\r\n        <Button icon={<UploadOutlined />}>Select File</Button>\r\n      </Upload>\r\n\r\n      {fileList.length > 0 && !uploadedFile && (\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={handleUpload}\r\n          disabled={uploading}\r\n          loading={uploading}\r\n          style={{ marginTop: 16 }}\r\n        >\r\n          {uploading ? 'Uploading...' : 'Start Upload'}\r\n        </Button>\r\n      )}\r\n\r\n      {uploading && (\r\n        <div style={{ marginTop: 24, textAlign: 'center' }}>\r\n          <Spin tip=\"Uploading your file...\" size=\"large\">\r\n            <div style={{ padding: '50px', background: 'rgba(0, 0, 0, 0.05)', borderRadius: '4px' }} />\r\n          </Spin>\r\n        </div>\r\n      )}\r\n\r\n      {!uploading && uploadedFile && (\r\n        <Descriptions\r\n          title=\"Uploaded File Details\"\r\n          bordered\r\n          column={1}\r\n          size=\"small\"\r\n          style={{ marginTop: 24 }}\r\n        >\r\n          <Descriptions.Item label=\"File Name\">{uploadedFile.name}</Descriptions.Item>\r\n          <Descriptions.Item label=\"Extension\">\r\n            {getFileExtension(uploadedFile.name)}\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Type\">{uploadedFile.type}</Descriptions.Item>\r\n          <Descriptions.Item label=\"Size\">\r\n            {uploadedFile.formattedSize}\r\n          </Descriptions.Item>\r\n          {uploadedFile.url && (\r\n            <Descriptions.Item label=\"URL\">\r\n              <a href={uploadedFile.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                View File\r\n              </a>\r\n            </Descriptions.Item>\r\n          )}\r\n        </Descriptions>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}